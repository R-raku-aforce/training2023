-- test データベースが存在していたら削除する
DROP DATABASE IF EXISTS test; 
-- test データベースを作成
CREATE database test;

-- データベースを選択
USE test;

-- 部署マスタテーブルを作成
CREATE TABLE m_department (
    department_code VARCHAR(3), /* 部署コード */
    department_name VARCHAR(100), /* 部署名 */
    updated_datetime DATETIME, /* 更新日時 */
    created_datetime DATETIME, /* 作成日時 */
    PRIMARY KEY(department_code)
);

-- 社員テーブルを作成
CREATE TABLE employee (
    employee_id VARCHAR(5), /* 社員番号 */
    employee_name VARCHAR(100) NOT NULL, /* 社員名 */
    department_code VARCHAR(3), /* 所属部署 */
    updated_datetime DATETIME DEFAULT CURRENT_TIMESTAMP, /* 更新日時 */
    created_datetime DATETIME DEFAULT CURRENT_TIMESTAMP, /* 作成日時 */
    PRIMARY KEY(employee_id),
    FOREIGN KEY (department_code) REFERENCES m_department(department_code) 
);

-- 勤務時間テーブル
CREATE TABLE working_hours (
    working_date DATE, /* 勤務日 */
    employee_id VARCHAR(5), /* 社員番号 */
    working_time_h DECIMAL(3,1), /* 勤務時間(時間) */
    updated_datetime DATETIME, /* 更新日時 */
    created_datetime DATETIME, /* 作成日時 */
    PRIMARY KEY(working_date, employee_id),
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id)
);

INSERT INTO m_department(department_code, department_name)
VALUES
    ('001', '営業部'),
    ('002', 'システム部'),
    ('003', '開発部'),
    ('004', '経理部'),
    ('005', '総務部');

INSERT INTO employee (employee_id, employee_name, department_code)
VALUES
    ('00001', '山田太郎', '001'),
    ('00002', '田中花子', '002'),
    ('00003', '佐藤ひろし','003'),
    ('00004', '吉田たかひろ', '004'),
    ('00005', '中田佳子', '003'),
    ('00006', '井上たかし', '001'),
    ('00007', '加藤浩子', '001'),
    ('00008', '和田剛','004'),
    ('00009', '関口優', '004'),
    ('00010', '山藤夏帆', '003');

INSERT INTO working_hours (working_date, employee_id, working_time_h)
VALUES
    ('2020-06-01', '00001', 7.5),
    ('2020-06-01', '00002', 8.0),
    ('2020-06-01', '00003', 10.5),
    ('2020-06-01', '00004', 7.5),
    ('2020-06-01', '00005', 8.5),
    ('2020-06-01', '00006', 9.0),
    ('2020-06-01', '00007', 12.0),
    ('2020-06-01', '00008', 9.5),
    ('2020-06-01', '00009', 8.0),
    ('2020-06-01', '00010', 7.5),

    ('2020-06-02', '00001', 7.5),
    ('2020-06-02', '00002', 5.0),
    ('2020-06-02', '00003', 12.5),
    ('2020-06-02', '00004', 7.5),
    ('2020-06-02', '00005', 10.5),
    ('2020-06-02', '00006', 10.0),
    ('2020-06-02', '00007', 7.5),
    ('2020-06-02', '00008', 8.5),
    ('2020-06-02', '00009', 8.0),
    ('2020-06-02', '00010', 9.5),

    ('2020-06-03', '00001', 7.5),
    ('2020-06-03', '00002', 7.5),
    ('2020-06-03', '00003', 13.5),
    ('2020-06-03', '00004', 7.5),
    ('2020-06-03', '00005', 9.5),
    ('2020-06-03', '00006', 10.0),
    ('2020-06-03', '00007', 13.0),
    ('2020-06-03', '00008', 6.5),
    ('2020-06-03', '00009', 8.0),
    ('2020-06-03', '00010', 7.5),

    ('2020-06-04', '00001', 7.5),
    ('2020-06-04', '00003', 10.5),
    ('2020-06-04', '00004', 8.5),
    ('2020-06-04', '00005', 10.5),
    ('2020-06-04', '00006', 13.0),
    ('2020-06-04', '00007', 12.0),
    ('2020-06-04', '00008', 7.5),
    ('2020-06-04', '00009', 8.0),
    ('2020-06-04', '00010', 7.5),

    ('2020-06-05', '00001', 8.0),
    ('2020-06-05', '00002', 10.5),
    ('2020-06-05', '00003', 12.5),
    ('2020-06-05', '00004', 8.5),
    ('2020-06-05', '00005', 10.0),
    ('2020-06-05', '00006', 12.0),
    ('2020-06-05', '00007', 10.0),
    ('2020-06-05', '00008', 7.5),
    ('2020-06-05', '00009', 7.0),
    ('2020-06-05', '00010', 10.5);